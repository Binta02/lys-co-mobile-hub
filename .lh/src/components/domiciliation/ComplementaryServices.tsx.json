{
    "sourceFile": "src/components/domiciliation/ComplementaryServices.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1748540768824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748540848509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,9 @@\n                   Hors frais de timbres\r\n                 </p>\r\n               </div>\r\n               <div className=\"space-y-2 mt-4\">\r\n-                <Button\r\n+                {/* <Button\r\n                   className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                   onClick={() =>\r\n                     handleAddToCart({\r\n                       id: \"service-reexpedition\",\r\n@@ -85,9 +85,28 @@\n                     })\r\n                   }\r\n                 >\r\n                   Ajouter au panier\r\n-                </Button>\r\n+                </Button> */}\r\n+                {session ? (\r\n+                  <Button \r\n+                    className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n+                    onClick={() => handleAddToCart({\r\n+                      id: 'service-reexpedition',\r\n+                      title: 'Service de réexpédition de courrier',\r\n+                      price: '10,00'\r\n+                    })}\r\n+                  >\r\n+                    Ajouter au panier\r\n+                  </Button>\r\n+                ) : (\r\n+                  <Button\r\n+                    className=\"w-full flex items-center justify-center bg-gray-400\"\r\n+                    onClick={() => (window.location.href = \"/login\")}\r\n+                  >\r\n+                    Se connecter pour ajouter au panier\r\n+                  </Button>\r\n+                )}\r\n                 <Link\r\n                   to=\"/services/reexpedition-courrier\"\r\n                   className=\"block w-full\"\r\n                 >\r\n@@ -117,9 +136,9 @@\n                   5€<span className=\"text-base font-normal\">/mois</span>\r\n                 </p>\r\n               </div>\r\n               <div className=\"space-y-2 mt-4\">\r\n-                <Button\r\n+                {/* <Button\r\n                   className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                   onClick={() =>\r\n                     handleAddToCart({\r\n                       id: \"service-scan\",\r\n@@ -128,9 +147,28 @@\n                     })\r\n                   }\r\n                 >\r\n                   Ajouter au panier\r\n-                </Button>\r\n+                </Button> */}\r\n+                {session ? (\r\n+                  <Button \r\n+                    className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n+                    onClick={() => handleAddToCart({\r\n+                      id: 'service-scan',\r\n+                      title: 'Service de numérisation de courrier',\r\n+                      price: '5,00'\r\n+                    })}\r\n+                  >\r\n+                    Ajouter au panier\r\n+                  </Button>\r\n+                ) : (\r\n+                  <Button\r\n+                    className=\"w-full flex items-center justify-center bg-gray-400\"\r\n+                    onClick={() => (window.location.href = \"/login\")}\r\n+                  >\r\n+                    Se connecter pour ajouter au panier\r\n+                  </Button>\r\n+                )}\r\n                 <Link to=\"/services/scan-courrier\" className=\"block w-full\">\r\n                   <Button variant=\"outline\" className=\"w-full\">\r\n                     En savoir plus\r\n                   </Button>\r\n@@ -156,9 +194,9 @@\n                   6€<span className=\"text-base font-normal\">/mois</span>\r\n                 </p>\r\n               </div>\r\n               <div className=\"space-y-2 mt-4\">\r\n-                <Button\r\n+                {/* <Button\r\n                   className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                   onClick={() =>\r\n                     handleAddToCart({\r\n                       id: \"service-colis\",\r\n@@ -167,9 +205,28 @@\n                     })\r\n                   }\r\n                 >\r\n                   Ajouter au panier\r\n-                </Button>\r\n+                </Button> */}\r\n+                {session ? (\r\n+                  <Button \r\n+                    className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n+                    onClick={() => handleAddToCart({\r\n+                      id: 'service-colis',\r\n+                      title: 'Service de gestion de colis',\r\n+                      price: '6,00'\r\n+                    })}\r\n+                  >\r\n+                    Ajouter au panier\r\n+                  </Button>\r\n+                ) : (\r\n+                  <Button\r\n+                    className=\"w-full flex items-center justify-center bg-gray-400\"\r\n+                    onClick={() => (window.location.href = \"/login\")}\r\n+                  >\r\n+                    Se connecter pour ajouter au panier\r\n+                  </Button>\r\n+                )}\r\n                 <Link to=\"/services/reception-colis\" className=\"block w-full\">\r\n                   <Button variant=\"outline\" className=\"w-full\">\r\n                     En savoir plus\r\n                   </Button>\r\n"
                },
                {
                    "date": 1748863126078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n                   <Button\r\n                     className=\"w-full flex items-center justify-center bg-gray-400\"\r\n                     onClick={() => (window.location.href = \"/login\")}\r\n                   >\r\n-                    Se connecter pour ajouter au panier\r\n+                    Connectez-vous\r\n                   </Button>\r\n                 )}\r\n                 <Link\r\n                   to=\"/services/reexpedition-courrier\"\r\n@@ -168,9 +168,9 @@\n                   <Button\r\n                     className=\"w-full flex items-center justify-center bg-gray-400\"\r\n                     onClick={() => (window.location.href = \"/login\")}\r\n                   >\r\n-                    Se connecter pour ajouter au panier\r\n+                    Connectez-vous\r\n                   </Button>\r\n                 )}\r\n                 <Link to=\"/services/scan-courrier\" className=\"block w-full\">\r\n                   <Button variant=\"outline\" className=\"w-full\">\r\n@@ -228,9 +228,9 @@\n                   <Button\r\n                     className=\"w-full flex items-center justify-center bg-gray-400\"\r\n                     onClick={() => (window.location.href = \"/login\")}\r\n                   >\r\n-                    Se connecter pour ajouter au panier\r\n+                    Connectez-vous\r\n                   </Button>\r\n                 )}\r\n                 <Link to=\"/services/reception-colis\" className=\"block w-full\">\r\n                   <Button variant=\"outline\" className=\"w-full\">\r\n"
                }
            ],
            "date": 1748540768824,
            "name": "Commit-0",
            "content": "\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Link } from 'react-router-dom';\r\nimport { Mail, FileText, Package } from 'lucide-react';\r\nimport { useCart } from \"@/components/cart/CartContext\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Session } from \"@supabase/supabase-js\";\r\n\r\n\r\nconst ComplementaryServices = () => {\r\n  const { addItem } = useCart();\r\n  const { toast } = useToast();\r\n    const [session, setSession] = useState<Session | null>(null);\r\nuseEffect(() => {\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => setSession(session));\r\n    supabase.auth.getSession().then(({ data: { session } }) => setSession(session));\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const handleAddToCart = (service: {id: string, title: string, price: string}) => {\r\n    addItem({\r\n      id: service.id,\r\n      title: service.title,\r\n      price: parseFloat(service.price.replace(',', '.')),\r\n      quantity: 1\r\n    });\r\n\r\n    toast({\r\n      title: \"Service ajouté au panier\",\r\n      description: `${service.title} a été ajouté à votre panier.`,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"py-12\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"text-center mb-8\">\r\n          <h2 className=\"text-3xl font-bold mb-4\">Nos Services Complémentaires</h2>\r\n          <p className=\"text-gray-600 max-w-2xl mx-auto\">\r\n            Optimisez votre temps avec nos services supplémentaires !\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          {/* Service de réexpédition */}\r\n          <Card className=\"flex flex-col\">\r\n            <CardHeader className=\"flex flex-col items-center\">\r\n              <Mail className=\"h-10 w-10 text-lysco-turquoise mb-2\" />\r\n              <CardTitle className=\"text-xl text-center\">REEX</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-grow flex flex-col justify-between\">\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm text-gray-700\">\r\n                  Service de réexpédition hebdomadaire de votre courrier, envois chaque mardi.\r\n                </p>\r\n                <p className=\"text-2xl font-semibold text-lysco-turquoise\">10€<span className=\"text-base font-normal\">/mois</span></p>\r\n                <p className=\"text-xs text-gray-500 italic\">Hors frais de timbres</p>\r\n              </div>\r\n              <div className=\"space-y-2 mt-4\">\r\n                <Button \r\n                  className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                  onClick={() => handleAddToCart({\r\n                    id: 'service-reexpedition',\r\n                    title: 'Service de réexpédition de courrier',\r\n                    price: '10,00'\r\n                  })}\r\n                >\r\n                  Ajouter au panier\r\n                </Button>\r\n                <Link to=\"/services/reexpedition-courrier\" className=\"block w-full\">\r\n                  <Button variant=\"outline\" className=\"w-full\">\r\n                    En savoir plus\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Scan de courrier */}\r\n          <Card className=\"flex flex-col\">\r\n            <CardHeader className=\"flex flex-col items-center\">\r\n              <FileText className=\"h-10 w-10 text-lysco-turquoise mb-2\" />\r\n              <CardTitle className=\"text-xl text-center\">Scan de courrier</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-grow flex flex-col justify-between\">\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm text-gray-700\">\r\n                  Numérisation de vos courriers dès réception pour un accès immédiat à vos documents.\r\n                </p>\r\n                <p className=\"text-2xl font-semibold text-lysco-turquoise\">5€<span className=\"text-base font-normal\">/mois</span></p>\r\n              </div>\r\n              <div className=\"space-y-2 mt-4\">\r\n                <Button \r\n                  className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                  onClick={() => handleAddToCart({\r\n                    id: 'service-scan',\r\n                    title: 'Service de numérisation de courrier',\r\n                    price: '5,00'\r\n                  })}\r\n                >\r\n                  Ajouter au panier\r\n                </Button>\r\n                <Link to=\"/services/scan-courrier\" className=\"block w-full\">\r\n                  <Button variant=\"outline\" className=\"w-full\">\r\n                    En savoir plus\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Service Colis */}\r\n          <Card className=\"flex flex-col\">\r\n            <CardHeader className=\"flex flex-col items-center\">\r\n              <Package className=\"h-10 w-10 text-lysco-turquoise mb-2\" />\r\n              <CardTitle className=\"text-xl text-center\">Service Colis</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-grow flex flex-col justify-between\">\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm text-gray-700\">\r\n                  Réception et gestion de vos colis professionnels.\r\n                </p>\r\n                <p className=\"text-2xl font-semibold text-lysco-turquoise\">6€<span className=\"text-base font-normal\">/mois</span></p>\r\n              </div>\r\n              <div className=\"space-y-2 mt-4\">\r\n                <Button \r\n                  className=\"w-full flex items-center justify-center bg-lysco-turquoise hover:bg-opacity-90\"\r\n                  onClick={() => handleAddToCart({\r\n                    id: 'service-colis',\r\n                    title: 'Service de gestion de colis',\r\n                    price: '6,00'\r\n                  })}\r\n                >\r\n                  Ajouter au panier\r\n                </Button>\r\n                <Link to=\"/services/reception-colis\" className=\"block w-full\">\r\n                  <Button variant=\"outline\" className=\"w-full\">\r\n                    En savoir plus\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n      <div className=\"mt-8 text-center\">\r\n            <Link to=\"/services-complementaires\">\r\n              <Button className=\"bg-lysco-turquoise hover:bg-lysco-turquoise/90\">\r\n                Découvrir tous nos services supplémentaires\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComplementaryServices;\r\n"
        }
    ]
}