{
    "sourceFile": "src/pages/Confirmation.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1748452164451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1748452164451,
            "name": "Commit-0",
            "content": "\r\nimport * as React from \"react\";\r\nimport { useLocation, Link, Navigate } from 'react-router-dom';\r\nimport Navbar from '@/components/Navbar';\r\nimport Footer from '@/components/Footer';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Check, ShoppingBag } from 'lucide-react';\r\nimport ContractGenerator from '@/components/contract/ContractGenerator';\r\n\r\nconst Confirmation = () => {\r\n  const location = useLocation();\r\n  \r\n  // Rediriger si l'utilisateur accède directement à la page sans passer par le checkout\r\n  if (!location.state?.order) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  const { order } = location.state;\r\n  const { orderId, items, subtotal, tax, total, clientInfo } = order;\r\n\r\n  // Check if the order contains domiciliation items\r\n  const domiciliationItems = items.filter(item => \r\n    // item.title.toLowerCase().includes('domiciliation') || \r\n    item.title\r\n    .toLowerCase()\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .includes('domicili')\r\n    ||\r\n    item.title.toLowerCase().includes('entreprise') ||\r\n    item.title.toLowerCase().includes('auto-entrepreneur') ||\r\n    item.title.toLowerCase().includes('association')\r\n  );\r\n\r\n  // Get first domiciliation item for the contract\r\n  const domiciliationItem = domiciliationItems.length > 0 ? domiciliationItems[0] : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <Navbar />\r\n      <div className=\"flex-1 py-16\">\r\n        <div className=\"container mx-auto px-4 max-w-3xl\">\r\n          <div className=\"text-center mb-8\">\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4\">\r\n              <Check className=\"h-8 w-8 text-green-600\" />\r\n            </div>\r\n            <h1 className=\"text-3xl font-bold\">Commande confirmée</h1>\r\n            <p className=\"text-gray-600 mt-2\">\r\n              Vous trouverez les informations de votre commande ci-dessous.<br />\r\n              Votre facture sera disponible dans votre espace personnel.\r\n            </p>\r\n          </div>\r\n\r\n          <Card className=\"mb-8\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center justify-between\">\r\n                <span>Détails de la commande</span>\r\n                <span className=\"text-sm font-normal text-gray-600\">#{orderId}</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold mb-2\">Articles</h3>\r\n                  {items.map((item, index) => (\r\n                    <div key={index} className=\"flex justify-between py-2 border-b last:border-0\">\r\n                      <div>\r\n                        <p>{item.title}</p>\r\n                        <p className=\"text-sm text-gray-600\">Quantité: {item.quantity}</p>\r\n                      </div>\r\n                      <p className=\"font-medium\">{(item.price * item.quantity).toFixed(2)} €</p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"pt-4\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Sous-total</span>\r\n                    <span>{subtotal.toFixed(2)} €</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between mt-2\">\r\n                    <span>TVA (20%)</span>\r\n                    <span>{tax.toFixed(2)} €</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between pt-4 mt-2 border-t font-bold\">\r\n                    <span>Total</span>\r\n                    <span>{total.toFixed(2)} €</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"pt-4 border-t\">\r\n                  <h3 className=\"font-semibold mb-2\">Informations client</h3>\r\n                  <p className=\"text-gray-800\">{clientInfo.firstName} {clientInfo.lastName}</p>\r\n                  <p className=\"text-gray-600\">{clientInfo.email}</p>\r\n                  <p className=\"text-gray-600\">{clientInfo.companyName}</p>\r\n                  <p className=\"text-gray-600\">SIRET: {clientInfo.siretNumber}</p>\r\n                  <p className=\"text-gray-600\">{clientInfo.address}</p>\r\n                  {clientInfo.addressDetails && <p className=\"text-gray-600\">{clientInfo.addressDetails}</p>}\r\n                  <p className=\"text-gray-600\">{clientInfo.city}, {clientInfo.postalCode}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {domiciliationItem && (\r\n                <div className=\"mt-6 pt-6 border-t\">\r\n                  <h3 className=\"font-semibold mb-4\">Votre contrat de domiciliation</h3>\r\n                  <p className=\"text-sm text-gray-600 mb-4\">\r\n                    Il est impératif de télécharger votre contrat de domiciliation maintenant. Vous ne pourrez plus y accéder par la suite, sauf en repassant commande ou en venant à l’agence.<br /><br />\r\n                    Merci d’imprimer le contrat en deux exemplaires, de les signer et de nous les retourner à notre adresse.\r\n                  </p>\r\n                  <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 text-sm text-yellow-800\">\r\n                    <strong>Attention :</strong><br />\r\n                    Merci de bien vouloir retourner le contrat signé accompagné des documents suivants :\r\n                    <ul className=\"list-disc pl-5 mt-2\">\r\n                      <li>Pièce d’identité : Veuillez fournir une copie de votre pièce d’identité valide.</li>\r\n                      <li>Justificatif de domicile : Merci de nous faire parvenir un justificatif de domicile récent (moins de 3 mois).</li>\r\n                    </ul>\r\n                    <br />\r\n                    Ces documents sont nécessaires pour compléter votre inscription et finaliser le processus.<br />\r\n                    Nous vous remercions de votre coopération et restons disponibles pour toute question.\r\n                  </div>\r\n                  <ContractGenerator \r\n                    clientInfo={clientInfo} \r\n                    planDetails={{\r\n                      name: domiciliationItem.title,\r\n                      price: domiciliationItem.price\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <div className=\"flex justify-center gap-4\">\r\n            <Button asChild>\r\n              <Link to=\"/\" className=\"flex items-center gap-2 bg-lysco-turquoise hover:bg-lysco-turquoise/90\">\r\n                <ShoppingBag size={16} />\r\n                Continuer vos achats\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Confirmation;\r\n"
        }
    ]
}